当前项目是一个基于ESP32C3的WIFI/UART的收发器项目，它有一个单色屏幕，大小为128X64, 有一个按键，用于实现页面切换和跳转。目前显示部分有如下需求待实现。

## 基础库

1. 显示屏驱动目前已实现（**components/lcd_display）**可以实现画水平线， 实现字体渲染和单色位图渲染等。
2. 按键操作驱动也已实现（components/ext_gpio），通过app_event_loop接收具体事件即可。
3. 另外，由于屏幕过小的原因，需要实现一种滚动显示文本的需求。比如，指定显示宽度，当需要显示的文本超过宽度时，需要水平滚动，以显示完整信息。
4. lcd_display_mono_img函数, 需要增加反色显示的参数.

## 显示总体需求

整个显示由页和对话框组成。总体实现由四个页面和两种弹出框组成。

四个页面分别是

- home: 主页
- wifi: WIFI网络选择页
- uart: 波特率选择页
- help:帮助页

弹出框有以下两种：

- menu:菜单选择框
- msg: 消息框

弹出框约束：

1. menu和 msg 不能同时显示
2. 当前页为home，且menu未活动时，才能显示msg. 
3. 如果收到按键事件，激活menu时，msg自动消失。
4. menu有且仅当前页为home时，才弹出。

## 页面设计详细

1. home 页

分为四行显示,  

第一行定义为状态栏, 行高为13, 底边界1像素, 右侧显示WIFI信号图标 , 剩余区域用来显示WIFI连接信息, 未连接时显示OFFLINE, 已连接时,显示WIFI的IP地址.
第二行, 行高 20 显示WIFI SSID, 行首显示 network 图标, 接着显示SSID, 使用8X16 字体, 内容水平居中
第三行,行高20, 显示 串口波特率, 行首使用 serial 图标, 接着显示波特率, 使用8X16字体, 内容水平居中第四行,行高11, 使用一个竖线,将该行左右等分为两部分,分别显示串口接收字节数和发送字节数. 使用8x8字体, 水平居中.

home 页面允许显示弹出框,  可以配置弹出框自动消失时间. 默认为5秒.

2. wifi 页
主要作用是提供用户进行WIFI网络选择
第一行显示标题: 8X8字体, 文本内容为: NETWORK
剩余空间显示 WIFI网络SSID列表, 使用8X16的字体, 列表内容行首, 预留一个图标位, 用来显示‘>’符号,表示当前选择的网络.

3. uart 页 
主要作用是提供用户进行串口波特率选择
第一行显示标题: 8X8字体, 文本内容为: BAUDRATE
剩余空间显示可用波特率列表, 使用8X16的字体, 列表内容行首, 预留一个图标位, 用来显示‘>’符号,表示当前选择的波特率.

4. help 页 
显示帮助信息.
help页没有标题行. 使用8x16字体, 按内容显示,4行紧凑显示.

5. 弹出框.
高度为40, 宽度约为100, 带1像素边框. 显示文本使用 8X16字体.  不需要滚动显示, 设计约束消息内容不会超出显示区域.

## **页面跳转**

在home页时, 收到单击 释放事件后, 弹出菜单框, 连续单击释放事件切换菜单中的选择项。
菜单弹出框目前有三个选项, 使用图标显示. 可以使用反色显示作为选中的菜单项.

[ ICON1  ICON2 ICON3 ]
双击进入指定配置菜单。 5秒没的操作，退出菜单。
icon1 使用 network图标, 双击后进入wifi网络设置页(wifi).
icon2 使用serial 图标, 双击后进入 串口波特率设置页(uart) 
icon3 使用 help 图标, 双击后进入 帮助页(help).

wifi网络选择
进入wifi页后, 单击释放事件可以切换当前选中的项. 双击回到home 页. 20秒无操作自动退出.
串口波特率选择 
进入串口波特率选择页后, 单击释放事件可以切换当前选中的项. 双击回到home 页.20秒无操作自动退出

帮助页

单击释放事件可以用来向上滚动一行. 双击回到home 页. 20秒无操作,自动退出.

## 数据模拟与导出API

显示中使用的数据暂时不与其他模块联动, 可以使用假数据.
显示模块需要的数据, 可以抽象出以下几个函数:

1. 获取WIFI状态,  包括是否连接, SSID, IP地址, 信号等级。
2. 获取串口信息. 包括 当前波特率, 接收字节数, 发送字节数.

同时, 显示模块需要提供一个消息API, 供其他模块调用.

